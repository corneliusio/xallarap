{"version":3,"file":"xallarap.min.js","sources":["../src/modules/parallax-abstract.js","../src/modules/parallax-foreground.js","../src/util/hash.js","../src/util/debounce.js","../src/modules/parallax-background.js","../src/index.js"],"sourcesContent":["\nexport default class Parallax {\n\n    constructor() {\n        this.compensate = false;\n        this.include = innerHeight;\n        this.hack = (!window.CSS || !CSS.supports || !CSS.supports('will-change', 'transform'));\n        this.reduceMotion = window.matchMedia && matchMedia('(prefers-reduced-motion)').matches;\n    }\n\n    static settings(options, defaultSelector) {\n\n        const dom = query => document.querySelectorAll(query);\n\n        switch (typeof options.el) {\n        case 'string' :\n            options.el = dom(options.el);\n            break;\n\n        case 'object' :\n            options.el = options.el;\n            break;\n\n        default :\n            options.el = dom(defaultSelector);\n            break;\n        }\n\n        if (NodeList.prototype.isPrototypeOf(options.el)) {\n            options.el = Array.from(options.el);\n        }\n\n        if (!Array.isArray(options.el)) {\n            options.el = [options.el];\n        }\n\n        return options;\n    }\n\n    animate() {\n        this.monitor();\n\n        if (this.hasChanged() && this.isVisible()) {\n            this.unchange();\n            this.measure();\n            this.update();\n        }\n\n        requestAnimationFrame(() => {\n            this.animate();\n        });\n    }\n\n    hasChanged() {\n        return this.wtop !== this.pwtop\n            || this.wheight !== this.pwheight\n            || this.top > (this.ptop + 1)\n            || this.top < (this.ptop - 1)\n            || this.height > (this.pheight + 1)\n            || this.height < (this.pheight - 1);\n    }\n\n    unchange() {\n        this.pwtop = this.wtop;\n        this.pwheight = this.wheight;\n        this.ptop = this.top;\n        this.pheight = this.height;\n    }\n\n    monitor() {\n        this.wtop = pageYOffset;\n        this.wheight = innerHeight;\n        this.wbottom = this.wtop + this.wheight;\n        this.top = this.el.getBoundingClientRect().top + this.wtop;\n        this.height = this.el.offsetHeight;\n        this.bottom = this.top + this.height;\n    }\n\n    measure() {\n\n        let scrolled = this.compensate\n            ? (this.wtop / this.wheight)\n            : (this.wtop + (this.wheight / 2) - this.origin()) / (this.height + this.wheight);\n\n        this.middle = this.top + (this.height / 2);\n        this.margin = (this.boundary < 0)\n            ? Math.abs(this.boundary)\n            : Math.round(this.boundary * (1 - this.height / this.wheight));\n        this.margin += 50;\n        this.parallax = parseFloat((this.boundary * scrolled).toFixed(1));\n\n        if (this.css.setProperty) {\n            this.css.setProperty('--parallax-control', parseFloat(scrolled).toFixed(2));\n        }\n    }\n\n    isVisible() {\n        return this.bottom + this.include > this.wtop && this.top - this.include < this.wbottom;\n    }\n}\n","import Parallax from './parallax-abstract';\n\nclass ParallaxForeground extends Parallax {\n\n    constructor(el, settings) {\n        super();\n        this.el = el;\n        this.init(settings);\n    }\n\n    init(settings) {\n\n        if (this.reduceMotion) {\n            return;\n        }\n\n        this.compensate = !!(this.el.dataset.parallaxCompensate === '' || settings.compensate);\n\n        this.boundary = !isNaN(parseInt(this.el.dataset.parallaxAmount))\n            ? parseInt(this.el.dataset.parallaxAmount)\n            : settings.amount || 300;\n\n        if (!!this.boundary) {\n            this.css = this.el.style;\n            this.css.display = 'inline-block';\n            this.css.transition = 'initial';\n            this.css.willChange = 'transform';\n            this.css.transform = this.hack ? 'translate3d(0,0,0)' : 'translateY(0)';\n\n            this.animate();\n        }\n    }\n\n    origin() {\n        return this.middle - (this.parallax || 0);\n    }\n\n    update() {\n        if (this.parallax !== this.pparallax) {\n            this.pparallax = this.parallax;\n            this.hack\n                ? this.css.transform = `translate3d(0,${this.parallax}px,0)`\n                : this.css.transform = `translateY(${this.parallax}px)`;\n        }\n    }\n}\n\nexport default (options = {}) => {\n\n    const settings = Parallax.settings(options, '[data-parallax]');\n\n    for (let i = 0; i < settings.el.length; ++i) {\n        new ParallaxForeground(settings.el[i], settings);\n    }\n};\n","export default input => {\n\n    let str = input.toString(),\n        len = str.length,\n        hash = 0,\n        chr;\n\n    if (len === 0) {\n        return hash;\n    }\n\n    for (let i = 0; i < len; i++) {\n        chr = str.charCodeAt(i);\n        hash = ((hash << 5) - hash) + chr;\n        hash |= 0;\n    }\n\n    return Math.abs(hash).toString();\n};\n","import hash from './hash';\n\nconst timeouts = [];\n\nexport default (func, wait, ...args) => {\n\n    let key = hash(func),\n\n        bounce = (...pass) => {\n            clearTimeout(timeouts[key]);\n            delete timeouts[key];\n            func(...pass);\n        },\n\n        queue = (...pass) => {\n            clearTimeout(timeouts[key]);\n            timeouts[key] = setTimeout(() => bounce(...pass), wait);\n        };\n\n    if (args.length === 1 && args[0] === 'prepare') {\n        return queue;\n    }\n\n    queue(...args);\n};\n","import Parallax from './parallax-abstract';\nimport debounce from '../util/debounce';\n\nclass ParallaxBackground extends Parallax {\n\n    constructor(container, settings) {\n        super();\n        this.wrap = container;\n        this.init(settings);\n    }\n\n    init(settings) {\n\n        let src = (this.wrap.dataset.parallaxBackground || this.wrap.dataset.parallaxBg),\n            bg = getComputedStyle(this.wrap).backgroundImage.replace(/url\\(\"?([^)\"]+)\"?\\)/, '$1');\n\n        if (this.reduceMotion) {\n\n            if (bg === 'none') {\n                this.wrap.style.backgroundImage = `url(${src})`;\n            }\n\n            return;\n        }\n\n        this.boundary = !isNaN(parseInt(this.wrap.dataset.parallaxAmount))\n            ? parseInt(this.wrap.dataset.parallaxAmount)\n            : settings.amount || Math.round(innerHeight / 2);\n\n        if (!!this.boundary) {\n\n            this.el = document.createElement('div');\n            this.img = document.createElement('img');\n            this.img.src = src || settings.image || bg;\n            this.css = this.el.style;\n\n            this.css.backgroundImage = `url(${this.img.src})`;\n            this.css.position = this.img.style.position = 'absolute';\n            this.css.top = this.css.left = this.css.right = this.css.bottom = 0;\n            this.css.zIndex = -1;\n            this.css.backgroundSize = 'cover';\n            this.css.backgroundPosition = 'center center';\n            this.css.transition = 'initial';\n            this.css.willChange = 'transform';\n            this.css.transform = this.hack ? 'translate3d(0,0,0)' : 'translateY(0)';\n\n            this.wrap.style.position = 'relative';\n            this.wrap.style.zIndex = 2;\n            this.wrap.style.overflow = 'hidden';\n\n            this.wrap.appendChild(this.el);\n\n            this.img.addEventListener('load', () => {\n\n                this.img = null;\n\n                this.measure();\n                this.update();\n            });\n\n            window.addEventListener('resize', () => {\n                debounce(() => {\n                    this.measure();\n                    this.update();\n                }, 256);\n            });\n\n            this.animate();\n        }\n    }\n\n    origin() {\n        return this.middle;\n    }\n\n    update() {\n\n        if (this.margin !== this.pmargin) {\n            let currentMinHeight = parseInt(this.css.minHeight),\n                potentialMinHeight = this.wrap.offsetHeight + this.margin;\n\n            if (isNaN(currentMinHeight) || Math.abs(currentMinHeight - potentialMinHeight) > 5) {\n                this.css.minHeight = `${potentialMinHeight}px`;\n            }\n\n            this.pmargin = this.margin;\n        }\n\n        if (this.parallax !== this.pparallax) {\n            let p = parseFloat((this.parallax - (this.margin / 2)).toFixed(1));\n\n            this.pparallax = this.parallax;\n\n            this.hack\n                ? this.css.transform = `translate3d(0,${p}px,0)`\n                : this.css.transform = `translateY(${p}px)`;\n        }\n    }\n}\n\nexport default (options = {}) => {\n\n    const settings = Parallax.settings(options, '[data-parallax-background],[data-parallax-bg]');\n\n    for (let i = 0; i < settings.el.length; ++i) {\n        new ParallaxBackground(settings.el[i], settings);\n    }\n};\n","import foreground from './modules/parallax-foreground';\nimport background from './modules/parallax-background';\n\nexport default (options = {}) => {\n    foreground(options.foreground);\n    background(options.background);\n};\n"],"names":["Parallax","constructor","compensate","include","innerHeight","hack","window","CSS","supports","reduceMotion","matchMedia","matches","settings","options","defaultSelector","dom","query","document","querySelectorAll","el","NodeList","prototype","isPrototypeOf","Array","from","isArray","animate","monitor","hasChanged","isVisible","unchange","measure","update","requestAnimationFrame","wtop","pwtop","wheight","pwheight","top","ptop","height","pheight","pageYOffset","wbottom","getBoundingClientRect","offsetHeight","bottom","scrolled","origin","middle","margin","boundary","Math","abs","round","parallax","parseFloat","toFixed","css","setProperty","ParallaxForeground","init","dataset","parallaxCompensate","isNaN","parseInt","parallaxAmount","amount","style","display","transition","willChange","transform","pparallax","i","length","input","str","toString","len","hash","chr","charCodeAt","timeouts","func","wait","args","key","bounce","pass","clearTimeout","queue","setTimeout","ParallaxBackground","container","wrap","src","parallaxBackground","parallaxBg","bg","getComputedStyle","backgroundImage","replace","createElement","img","image","position","left","right","zIndex","backgroundSize","backgroundPosition","overflow","appendChild","addEventListener","debounce","pmargin","currentMinHeight","minHeight","potentialMinHeight","p","foreground","background"],"mappings":"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"}